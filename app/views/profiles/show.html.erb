<h1><%= @user.name%></h1> 
  
  
<% if current_user != @user %>
  <% if current_user.following?(@user) %>
    <%= form_with url: unfollow_profiles_path(user_id: @user.id), method: :delete do %>
      <%= submit_tag 'unfollow', class: 'btn btn-primary' %>
    <% end %>
  <% elsif current_user.sent_follow_request_to?(@user)%>
    <%= form_with url: cancel_profiles_path(user_id: @user.id), method: :post do %>
      <%= submit_tag 'Cancel', class: 'btn btn-primary' %>
    <% end %>
  <% else %>
    <%= form_with url: follow_profiles_path(user_id: @user.id), method: :post do %>
      <%= submit_tag 'Follow', class: 'btn btn-primary' %>
    <% end %>
  <% end %>
<%end%>


<% if user_signed_in? %> 
 <div> Welcome <%= current_user.email %> </div> 
  <%= button_to "Sign out", destroy_user_session_path, method: :delete %> 

  <% current_user.pending_requests.each do |request| %>
    <%= request.followable.email %> wants to follow you
    <%= button_to 'Accept', accept_profiles_path(user_id:request.followable.id)%>
    <%= button_to 'Decline', decline_profiles_path(user_id:request.followable.id)%>
  <%end%>
  <hr />
  

<% else %>
  <%= button_to "Sign in", new_user_session_path %> 
<% end %>

<%= form_with url: homes_path, method: :get, local: true do %>
  <%= label_tag :search, "Search:" %>
  <%= text_field_tag :search%>
  <%= submit_tag "Search" %>
<% end %>

<h1><%= @user.name%></h1> 

<% if current_user != @user %>
  <% if current_user.following?(@user) %>
    <%= form_with url: unfollow_profiles_path(user_id: @user.id), method: :delete do %>
      <%= submit_tag 'unfollow', class: 'btn btn-primary' %>
    <% end %>
  <% elsif current_user.sent_follow_request_to?(@user)%>
    <%= form_with url: cancel_profiles_path(user_id: @user.id), method: :post do %>
      <%= submit_tag 'Cancel', class: 'btn btn-primary' %>
    <% end %>
  <% else %>
    <%= form_with url: follow_profiles_path(user_id: @user.id), method: :post do %>
      <%= submit_tag 'Follow', class: 'btn btn-primary' %>
    <% end %>
  <% end %>
<%end%>

